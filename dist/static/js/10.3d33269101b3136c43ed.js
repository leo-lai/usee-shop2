webpackJsonp([10,34],{127:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{list:{type:Array,default:[]}},data:function(){return{ordersState:{"-1":{cls:"l-text-gray",name:"已取消"},0:{cls:"",name:"全部"},1:{cls:"l-text-warn",name:"未付款"},2:{cls:"l-text-ok",name:"已付款"},3:{cls:"l-text-warn",name:"待发货"},4:{cls:"l-text-warn",name:"已发货"},5:{cls:"l-text-ok",name:"已收货"},6:{cls:"",name:"交易完成"}}}},methods:{cancel:function(t){var e=this;this.$mui.confirm("确定取消订单？",function(s){1==s.index&&(e.$mui.showWaiting(),e.$server.order.changeStatus(t,"CANCEL").then(function(){e.$mui.toast("取消成功"),e.$eventHub.$emit("APP-CANCEL",t)}).finally(function(){e.$mui.hideWaiting()}))})},receive:function(t){var e=this;this.$mui.confirm("确定已收到商品？",function(s){1==s.index&&(e.$mui.showWaiting(),e.$server.order.changeStatus(t,"RECEIVE").then(function(){e.$mui.toast("收货成功"),e.$eventHub.$emit("APP-RECEIVE",t)}).finally(function(){e.$mui.hideWaiting()}))})},express:function(t){this.$link("/order/express/"+t,"page-in")},evaluate:function(t){this.$storage.session.set("temp_evaluate_order",t),this.$link("/order/evaluate/"+t.orderId,"page-in")},pay:function(t){this.$storage.session.set("temp_pay_info",{orderId:t.orderId,orderCode:t.orderCode,amount:t.amount}),window.location.replace(this.$server.getGrantUrl("/pay/?to=/order/list?tab=1"))}}}},155:function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(348),n=i(a),r=s(17),o=i(r);e.default={components:{orderList:n.default,infiniteLoading:o.default},data:function(){return{tabIndex:-1,orderList0:[],orderList1:[],orderList2:[],orderList3:[]}},methods:{tabClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this["orderList"+t];this.tabIndex=t,e.complete?this.$refs.infinite.$emit("$InfiniteLoading:complete"):0!==e.length&&e.loaded?this.$refs.infinite.$emit("$InfiniteLoading:reset",!1):this.$refs.infinite.$emit("$InfiniteLoading:reset",!0),this.$router.replace("?tab="+t)},onInfinite:function(){var t=this,e="",s=this.tabIndex;switch(s){case 1:e="UNPAY";break;case 2:e="RECEIVE";break;case 3:e="EVALUATE";break;default:e="ALL"}this.$server.order.getList(e,this.pages[s]).then(function(e){var i=e.data,a=t["orderList"+s];a=a.concat(i),i.length>0?(a.loaded=!0,t.$nextTick(function(){t.$refs.infinite.$emit("$InfiniteLoading:loaded")}),i.length>=i.rows?(t.pages[t.tabIndex]++,a.complete=!1):(a.complete=!0,t.$refs.infinite.$emit("$InfiniteLoading:complete"))):(a.length>0?a.noMore=!0:a.noResults=!0,a.complete=!0,t.$refs.infinite.$emit("$InfiniteLoading:complete")),t["orderList"+s]=a}).catch(function(){t["orderList"+s].complete=!0,t.$refs.infinite.$emit("$InfiniteLoading:complete")})}},created:function(){var t=this;this.$eventHub.$on("APP-RECEIVE",function(e){t["orderList"+t.tabIndex].forEach(function(s,i){if(s.orderId===e)return s.ordersState=5,2==t.tabIndex&&(t.orderList2.splice(i,1),t.orderList3.unshift(s)),!0})}),this.$eventHub.$on("APP-CANCEL",function(e){t.orderList0.forEach(function(s,i){if(s.orderId===e)return t.orderList0.splice(i,1),!0}),t.orderList1.forEach(function(s,i){if(s.orderId===e)return t.orderList1.splice(i,1),!0})}),this.pages=[1,1,1,1],this.$nextTick(function(){t.tabClick(Number(t.$route.query.tab||0))})}}},227:function(t,e,s){e=t.exports=s(2)(),e.push([t.id,".l-order-item[data-v-146ab7d2]{background:#fff}.l-order-item ._ft[data-v-146ab7d2],.l-order-item ._hd[data-v-146ab7d2]{padding:.5rem .75rem}.l-order-item ._ft .mui-btn[data-v-146ab7d2]{margin-left:.25rem}","",{version:3,sources:["/./src/components/order-list.vue"],names:[],mappings:"AACA,+BAA+B,eAAe,CAC7C,AAGD,wEAAoC,oBAAoB,CACvD,AACD,6CAA6C,kBAAkB,CAC9D",file:"order-list.vue",sourcesContent:["\n.l-order-item[data-v-146ab7d2]{background:#fff\n}\n.l-order-item ._hd[data-v-146ab7d2]{padding:.5rem .75rem\n}\n.l-order-item ._ft[data-v-146ab7d2]{padding:.5rem .75rem\n}\n.l-order-item ._ft .mui-btn[data-v-146ab7d2]{margin-left:.25rem\n}"],sourceRoot:"webpack://"}])},243:function(t,e,s){e=t.exports=s(2)(),e.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",file:"order-list.vue",sourceRoot:"webpack://"}])},265:function(t,e,s){var i=s(227);"string"==typeof i&&(i=[[t.id,i,""]]);s(3)(i,{});i.locals&&(t.exports=i.locals)},284:function(t,e,s){var i=s(243);"string"==typeof i&&(i=[[t.id,i,""]]);s(3)(i,{});i.locals&&(t.exports=i.locals)},348:function(t,e,s){s(265);var i=s(1)(s(127),s(391),"data-v-146ab7d2",null);t.exports=i.exports},374:function(t,e,s){s(284);var i=s(1)(s(155),s(409),"data-v-594657b7",null);t.exports=i.exports},391:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-order-list l-fs-s"},t._l(t.list,function(e){return s("div",{staticClass:"l-order-item l-margin-t"},[s("router-link",{attrs:{to:"/order/info/"+e.orderId,tag:"div"}},[s("div",{staticClass:"_hd l-link-arrow"},[s("span",{staticClass:"mui-pull-right",class:t.ordersState[e.ordersState].cls},[t._v(t._s(t.ordersState[e.ordersState].name))]),t._v(" "),s("span",[t._v("订单号："+t._s(e.orderCode))])]),t._v(" "),s("div",{staticClass:"_bd l-panel-group l-border-t"},t._l(e.ordersInfo,function(e){return s("div",{staticClass:"_item l-flex-hc"},[s("div",{staticClass:"l-thumb l-bg-contain l-margin-r",style:{"background-image":"url("+e.image+")"}}),t._v(" "),s("div",{staticClass:"l-rest l-fs-s"},[s("p",{staticClass:"l-text-wrap2"},[t._v(t._s(e.goodsName))]),t._v(" "),s("div",{staticClass:"l-margin-m1"},[s("p",{staticClass:"l-fr"},[s("span",[s("b",{staticClass:"l-icon"},[t._v("")]),t._v(t._s(t._f("currency")(e.amount)))]),t._v(" "),s("span",{staticClass:"l-text-gray"},[t._v("x"+t._s(e.goodsNumber))])]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.colorName,expression:"goods.colorName"}],staticClass:"l-text-gray"},[t._v("款式："+t._s(e.colorName))])])])])}))]),t._v(" "),s("div",{staticClass:"_ft l-border-t l-flex-hc"},[s("span",[t._v("共"+t._s(e.ordersInfo.length)+"件 合计："),s("b",{staticClass:"l-icon"},[t._v("")]),t._v(t._s(t._f("currency")(e.amount)))]),t._v(" "),s("div",{staticClass:"l-rest l-text-right"},[1==e.ordersState?s("button",{staticClass:"mui-btn l-btn-white _s",on:{click:function(s){t.cancel(e.orderId)}}},[t._v("取消订单")]):t._e(),t._v(" "),1==e.ordersState?s("button",{staticClass:"mui-btn l-btn-main _s",on:{click:function(s){t.pay(e)}}},[t._v("去付款")]):t._e(),t._v(" "),e.ordersState>3?s("button",{staticClass:"mui-btn l-btn-white _s",on:{click:function(s){t.express(e.orderId)}}},[t._v("查看物流")]):t._e(),t._v(" "),4==e.ordersState?s("button",{staticClass:"mui-btn l-btn-main _s",on:{click:function(s){t.receive(e.orderId)}}},[t._v("确认收货")]):t._e(),t._v(" "),5==e.ordersState?s("button",{staticClass:"mui-btn l-btn-main _s",on:{click:function(s){t.evaluate(e)}}},[t._v("去评价")]):t._e()])])],1)}))},staticRenderFns:[]}},409:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-page"},[t.$device.isWechat?t._e():s("header",{staticClass:"mui-bar mui-bar-nav l-black"},[s("h1",{staticClass:"mui-title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),s("a",{staticClass:"mui-icon mui-icon-arrowleft mui-pull-left _nav-back"})]),t._v(" "),s("div",{staticClass:"mui-content"},[s("div",{staticClass:"l-tab-imgtit l-border-b l-flex-hc l-sticky"},[s("a",{staticClass:"_item l-rest",class:{_active:0==t.tabIndex},on:{click:function(e){t.tabClick(0)}}},[t._m(0),t._v(" "),s("p",{staticClass:"_txt"},[t._v("全部")])]),t._v(" "),s("a",{staticClass:"_item l-rest",class:{_active:1==t.tabIndex},on:{click:function(e){t.tabClick(1)}}},[t._m(1),t._v(" "),s("p",{staticClass:"_txt"},[t._v("待付款")])]),t._v(" "),s("a",{staticClass:"_item l-rest",class:{_active:2==t.tabIndex},on:{click:function(e){t.tabClick(2)}}},[t._m(2),t._v(" "),s("p",{staticClass:"_txt"},[t._v("待收货")])]),t._v(" "),s("a",{staticClass:"_item l-rest",class:{_active:3==t.tabIndex},on:{click:function(e){t.tabClick(3)}}},[t._m(3),t._v(" "),s("p",{staticClass:"_txt"},[t._v("待评价")])])]),t._v(" "),s("div",{staticClass:"l-tab-group l-rest l-rel"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.tabIndex,expression:"tabIndex == 0"}],staticClass:"l-tab-cont"},[s("order-list",{attrs:{list:t.orderList0}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tabIndex,expression:"tabIndex == 1"}],staticClass:"l-tab-cont"},[s("order-list",{attrs:{list:t.orderList1}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tabIndex,expression:"tabIndex == 2"}],staticClass:"l-tab-cont"},[s("order-list",{attrs:{list:t.orderList2}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.tabIndex,expression:"tabIndex == 3"}],staticClass:"l-tab-cont"},[s("order-list",{attrs:{list:t.orderList3}})],1)]),t._v(" "),s("infinite-loading",{ref:"infinite",attrs:{"on-infinite":t.onInfinite}},[s("div",{staticClass:"l-loading-inline",attrs:{slot:"spinner"},slot:"spinner"},[s("i",{staticClass:"mui-spinner"}),s("span",{staticClass:"_txt"},[t._v("正在加载...")])]),t._v(" "),s("div",{staticClass:"l-text-gray l-fs-m",attrs:{slot:"no-results"},slot:"no-results"},[t._v("没有相关的数据")]),t._v(" "),s("div",{staticClass:"l-text-gray l-fs-m",attrs:{slot:"no-more"},slot:"no-more"},[t._v("全部数据加载完毕")])])],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("img",{staticClass:"_icon",attrs:{src:s(116)}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("img",{staticClass:"_icon",attrs:{src:s(113)}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("img",{staticClass:"_icon",attrs:{src:s(114)}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("img",{staticClass:"_icon",attrs:{src:s(115)}})])}]}}});
//# sourceMappingURL=10.3d33269101b3136c43ed.js.map